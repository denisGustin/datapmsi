<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Data PMSI</title>
<link>https://www.datapmsi.com/scripts_smr.html</link>
<atom:link href="https://www.datapmsi.com/scripts_smr.xml" rel="self" type="application/rss+xml"/>
<description>Codes et formations R pour les PMSI MCO, SMR, PSY et HAD</description>
<generator>quarto-1.4.551</generator>
<lastBuildDate>Tue, 17 Sep 2024 22:00:00 GMT</lastBuildDate>
<item>
  <title>Evolution des types de ZF, DZF et FZF des GME</title>
  <dc:creator>denis Gustin</dc:creator>
  <link>https://www.datapmsi.com/posts/smr/script_smr_evolution_type_zf_dzf_fzf_2023_2024/</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>On compare l’évolution des types de Zone Forfaitaire (ZF), des Débuts de Zone Forfaitaire (DZF) et des Fins de Zone Forfaitaire (FZF) des GME entre 2023 et 2024.</p>
<p>On se restreint au GME d’HC et aux seuls GME “pleins” (hors GMT en 8, en 7 ou d’EVC-EPR).</p>
<p>On se considère en ex-DAF. Pour réaliser les scripts en ex-OQN, il suffit d’appeler le référentiel <code>gme_prive</code>de refpmsi::</p>
<p>Le type de ZF a 3 modalités : zf_1 (ZF avec DZF = FZF), zf_7 (les ZF d’une semaine) et zf_21 (les ZF de 3 semaines)</p>
<p>Première analyse : comparaison pour chaque couple (GMT,GME) de l’évolution des types de ZF</p>
<p>Deuxième analyse : comparaison, pour chaque couple (GMT, GME) de l’évolution du DZF et de la FZF</p>
<p>Voir article <a href="https://www.lespmsi.com/evolutions-des-types-de-zf-dzf-et-fzf-des-gme-entre-2023-et-2024/" target="_blank">“Evolutions des types de ZF, DZF et FZF des GME entre 2023 et 2024”</a> pour une analyse métier</p>
</section>
<section id="code" class="level2">
<h2 class="anchored" data-anchor-id="code">Code</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(refpmsi)</span>
<span id="cb1-3"></span>
<span id="cb1-4">gme_hc_2024 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> refpmsi<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">refpmsi</span>(gme_public,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2024</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-5">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(gme_niveau_severite <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2"</span>), <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span>gmt_8, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span>gmt_7) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-6">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(gmt,gme,dzf,fzf,tzb,szb,tzf1,tzf2,tzf3,szh,gmt_type_zf,gme_libelle) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-7">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rename_with</span>(\(x) <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(x,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"_2024"</span>))</span>
<span id="cb1-8"></span>
<span id="cb1-9">gme_hc_2023 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> refpmsi<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">refpmsi</span>(gme_public,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2023</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-10">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(gme_niveau_severite <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2"</span>), <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span>gmt_8, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span>(gme <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0103SC1"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0103SC2"</span>))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-11">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(gmt,gme,dzf,fzf,tzb,szb,tzf1,tzf2,tzf3,szh,gmt_type_zf) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-12">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rename_with</span>(\(x) <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(x,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"_2023"</span>))</span>
<span id="cb1-13"></span>
<span id="cb1-14">gmt_type_zf_evolution <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> gme_hc_2024 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-15">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(gmt_2024,gme_2024,gme_libelle_2024,gmt_type_zf_2024) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-16">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(gme_hc_2023 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(gmt_2023,gmt_type_zf_2023), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">join_by</span>(gmt_2024 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> gmt_2023))</span>
<span id="cb1-17">gmt_type_zf_evolution</span>
<span id="cb1-18"></span>
<span id="cb1-19">gmt_type_dzf_fzf_evolution <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> gme_hc_2024 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-20">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(gmt_2024,gme_2024,gme_libelle_2024,gmt_type_zf_2024,dzf_2024,fzf_2024) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-21">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(gme_hc_2023 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(gmt_2023,gmt_type_zf_2023,dzf_2023,fzf_2023), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">join_by</span>(gmt_2024 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> gmt_2023)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-22">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">same_type_zf =</span> gmt_type_zf_2024 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> gmt_type_zf_2023,</span>
<span id="cb1-23">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">same_dzf =</span> dzf_2024 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> dzf_2023,</span>
<span id="cb1-24">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">same_fzf =</span> fzf_2024 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> fzf_2023)</span>
<span id="cb1-25">gmt_type_dzf_fzf_evolution</span></code></pre></div>
</div>
</section>
<section id="commentaires" class="level2">
<h2 class="anchored" data-anchor-id="commentaires">Commentaires</h2>
<p>Ligne 5 : filtrage des GME d’HC via la sévérité, exclusion des GMT en 8 et exclusion des GMT en 7</p>
<p>Ligne 6 : la variable gmt_type_zf correspondant au type de ZF du couple (GMT,GME) est déjà calculé dans refpmsi::</p>
<p>Ligne 7 : on suffixe chaque variable par “_2024” pour préparer les jointures avec les GME 2023. On passe par la fonction <code>dplyr::rename_with()</code> pour ajouter automatiquement le suffixe à toutes les variables.</p>
<p>Lignes 9 à 12 : copier-coller du code pour l’année 2023. Exclusion des GME d’EVC-EPR qui n’ont plus de GMT en 2024 (cf nouveau modèle de financement 2024 du SMR)</p>
<p>Ligne 16 : la jointure sur les GMT est sans équivoque (clé unique)</p>
<p>Lignes 22 à 24 : on produit des variables logiques pour laisser l’utilisateur filtrer librement</p>
<p><a href="http://www.lespmsi.com/scripts-pmsi-r/" target="_blank">Etre tenu au courant de la publication des nouveaux scripts PMSI R</a></p>


</section>

 ]]></description>
  <category>SMR</category>
  <category>GME</category>
  <guid>https://www.datapmsi.com/posts/smr/script_smr_evolution_type_zf_dzf_fzf_2023_2024/</guid>
  <pubDate>Tue, 17 Sep 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>CMA SMR et CMA MCO communes</title>
  <dc:creator>denis Gustin</dc:creator>
  <link>https://www.datapmsi.com/posts/smr/script_smr_cma_smr_cma_mco/</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>On se restreint à la campagne 2024 en SMR et en MCO.</p>
<p>Première analyse : pour chaque code CIM-10 CMA SMR 2024, on associe le niveau de sévérité CMA MCO 2024 du code CIM-10 si il existe.</p>
<p>Deuxième analyse : pour chaque code CIM-10 CMA MCO 2024, on associe une valeur logique <code>is_cma_smr</code> selon que ce code est CMA SMR 2024 ou pas.</p>
<p>On enrichit ces 2 listes avec le libellé CIM-10 de chaque CMA.</p>
</section>
<section id="code" class="level2">
<h2 class="anchored" data-anchor-id="code">Code</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyr)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(refpmsi)</span>
<span id="cb1-4"></span>
<span id="cb1-5">cma_smr <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> refpmsi<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">refpmsi</span>(cma_smr,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2024</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(cma_smr_code)</span>
<span id="cb1-6">cma_mco <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> refpmsi<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">refpmsi</span>(cma_mco,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2024</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(cma_mco_code,cma_mco_severite)</span>
<span id="cb1-7">cim_libelle <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> refpmsi<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">refpmsi</span>(cim_libelle) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(cim_code,cim_libelle)</span>
<span id="cb1-8"></span>
<span id="cb1-9">cma_smr_and_mco <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> cma_smr <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-10">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(cma_mco, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">join_by</span>(cma_smr_code <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> cma_mco_code)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-11">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(cim_libelle, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">join_by</span>(cma_smr_code <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> cim_code))</span>
<span id="cb1-12">cma_smr_and_mco</span>
<span id="cb1-13"></span>
<span id="cb1-14">cma_mco_and_smr <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> cma_mco <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-15">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(cma_smr <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">is_cma_smr =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">join_by</span>(cma_mco_code <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> cma_smr_code)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-16">    tidyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">replace_na</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">is_cma_smr =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-17">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(cim_libelle, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">join_by</span>(cma_mco_code <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> cim_code))</span>
<span id="cb1-18">cma_mco_and_smr</span></code></pre></div>
</div>
</section>
<section id="commentaires" class="level2">
<h2 class="anchored" data-anchor-id="commentaires">Commentaires</h2>
<p>Ligne 5 : voir <a href="https://denisgustin.github.io/refpmsi/articles/cim.html#cma-smr" target="_blank">Documentation</a></p>
<p>Ligne 6 : voir <a href="https://denisgustin.github.io/refpmsi/articles/cim.html#cma-mco" target="_blank">Documentation</a></p>
<p>Ligne 7 : voir <a href="https://denisgustin.github.io/refpmsi/articles/cim.html#cim-libell%C3%A9" target="_blank">Documentation</a></p>
<p>Ligne 16 : via <code>tidyr::replace_na()</code> on force les situations où <code>is_cma_smr</code> est NA suite à la ligne 15 à FALSE</p>
<p><a href="http://www.lespmsi.com/scripts-pmsi-r/" target="_blank">Etre tenu au courant de la publication des nouveaux scripts PMSI R</a></p>


</section>

 ]]></description>
  <category>SMR</category>
  <category>MCO</category>
  <category>CMA</category>
  <category>CIM-10</category>
  <guid>https://www.datapmsi.com/posts/smr/script_smr_cma_smr_cma_mco/</guid>
  <pubDate>Sun, 15 Sep 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Transcodage des actes CSARR en CSAR</title>
  <dc:creator>denis Gustin</dc:creator>
  <link>https://www.datapmsi.com/posts/smr/script_smr_transcodage_csar/</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>On transcode les actes CSARR dans le nouveau référentiel CSAR en faisant appel aux référentiels <code>csar_transcodage</code> et <code>csar_code</code> du package <code>refpmsi</code></p>
<p><a href="https://www.atih.sante.fr/simplification-du-csarr-guide-de-codage-csar-0" target="_blank">Documentation ATIH CSAR 2025</a></p>
</section>
<section id="code" class="level2">
<h2 class="anchored" data-anchor-id="code">Code</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(refpmsi)</span>
<span id="cb1-3"></span>
<span id="cb1-4">csarr_code <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> refpmsi<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">refpmsi</span>(csarr_code)</span>
<span id="cb1-5">csarr_libelle <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  csarr_code <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slice_head</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> csarr_code) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(csarr_code,csarr_libelle)</span>
<span id="cb1-6"></span>
<span id="cb1-7">csar_transcodage <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> refpmsi<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">refpmsi</span>(csar_transcodage)</span>
<span id="cb1-8">csar_code <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> refpmsi<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">refpmsi</span>(csar_code)</span>
<span id="cb1-9"></span>
<span id="cb1-10">base_csarr_csar <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> smr_rhs<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>csarr <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-11">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(nas,no_semaine,code_csarr) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-12">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(csarr_libelle, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">join_by</span>(code_csarr <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> csarr_code)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-13">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(csar_transcodage, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">join_by</span>(code_csarr <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> csarr_code)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-14">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(csar_code <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(csar_code, csar_libelle), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">join_by</span>(csar_code <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> csar_code))</span>
<span id="cb1-15">base_csarr_csar</span></code></pre></div>
</div>
</section>
<section id="commentaires" class="level2">
<h2 class="anchored" data-anchor-id="commentaires">Commentaires</h2>
<p>Ligne 4 : voir <a href="https://denisgustin.github.io/refpmsi/articles/csarr.html#csarr-code" target="_blank">Documentation</a></p>
<p>Lignes 7 et 8 : voir <a href="https://denisgustin.github.io/refpmsi/articles/csar.html" target="_blank">Documentation</a></p>
<p>Ligne 10 : <code>smr_rhs$csarr</code> est un tibble des variables <code>csarr</code> liées aux RHS</p>
<p>Ligne 13 : le transcodage proprement dit</p>
<p>Ligne 14 : rapatriement des libellés CSAR</p>
<p>Le transcodage des actes CSARR en CSAR est disponible dans les écrans CSARR <a href="https://www.pmsisoft.com/acces_pmsisoft_ssr" target="_blank">PMSISoft SMR</a></p>
<p><a href="http://www.lespmsi.com/scripts-pmsi-r/" target="_blank">Etre tenu au courant de la publication des nouveaux scripts PMSI R</a></p>


</section>

 ]]></description>
  <category>SMR</category>
  <category>CSARR</category>
  <category>CSAR</category>
  <guid>https://www.datapmsi.com/posts/smr/script_smr_transcodage_csar/</guid>
  <pubDate>Thu, 12 Sep 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Comparaison DZF, FZF et ZF entre 2023 et 2024</title>
  <dc:creator>denis Gustin</dc:creator>
  <link>https://www.datapmsi.com/posts/smr/script_smr_evolution_dzf_fzf_zf/</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>On se restreint aux GME d’HC, les seuls pour lesquels l’analyse a un sens.</p>
<p>On exclut les GMT “hebdomadaires” (GMT en 7) et les GMT des séjours &lt; 8 JP avec sortie transfert/mutation/décès (GMT en 8)</p>
<p>On suppose être en ex-DGF</p>
<p>On compare pour chaque GMT ainsi sélectionné l’évolution des valeurs des DZF, FZF et des durées de ZF entre les campagnes 2023 et 2024</p>
<p>gmt_type_zf = (zf_1, zf_7, zf_21) où zf_1 = ZF d’une JP, zf_7 = ZF d’une semaine et zf_21 = ZF de 3 semaines</p>
</section>
<section id="code" class="level2">
<h2 class="anchored" data-anchor-id="code">Code</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(refpmsi)</span>
<span id="cb1-3"></span>
<span id="cb1-4">gme_public <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> refpmsi<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">refpmsi</span>(gme_public)</span>
<span id="cb1-5"></span>
<span id="cb1-6">gme_public_2023 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> gme_public <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-7">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(annee_pmsi <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2023"</span>, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span>gmt_8,gme_niveau_severite <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-8">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">gmt_2023 =</span> gmt,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">gme_2023 =</span> gme,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dzf_2023 =</span> dzf,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fzf_2023 =</span> fzf,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">gmt_type_zf_2023 =</span> gmt_type_zf)</span>
<span id="cb1-9"></span>
<span id="cb1-10">gme_public_2024 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> gme_public <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-11">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(annee_pmsi <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2024"</span>, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span>gmt_8, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span>gmt_7, gme_niveau_severite <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-12">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">gmt_2024 =</span> gmt,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">gme_2024 =</span> gme,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dzf_2024 =</span> dzf,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fzf_2024 =</span> fzf,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">gmt_type_zf_2024 =</span> gmt_type_zf)</span>
<span id="cb1-13"></span>
<span id="cb1-14">same_dzf_fzf_zf <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> gme_public_2024 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-15">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(gme_public_2023, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">join_by</span>(gmt_2024 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> gmt_2023,gme_2024 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> gme_2023)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-16">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">same_dzf =</span> dzf_2024 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> dzf_2023, </span>
<span id="cb1-17">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">same_fzf =</span> fzf_2024 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> fzf_2023,</span>
<span id="cb1-18">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">same_gmt_type_zf =</span> gmt_type_zf_2024 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> gmt_type_zf_2023)</span>
<span id="cb1-19">same_dzf_fzf_zf</span>
<span id="cb1-20"></span>
<span id="cb1-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># liste des (GMT,GME) avec évolution de la durée de ZF entre 2023 et 2024 </span></span>
<span id="cb1-22">same_dzf_fzf_zf <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span>same_gmt_type_zf)</span>
<span id="cb1-23"></span>
<span id="cb1-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># liste des (GMT,GME) avec ZF d'une semaine en 2023 qui passent à une ZF de 3 semaines en 2024</span></span>
<span id="cb1-25">same_dzf_fzf_zf <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(gmt_type_zf_2023 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"zf_7"</span>, gmt_type_zf_2024 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"zf_21"</span>)</span></code></pre></div>
</div>
</section>
<section id="commentaires" class="level2">
<h2 class="anchored" data-anchor-id="commentaires">Commentaires</h2>
<p>Ligne 4 : voir <a href="https://www.lespmsi.com/referentiel-des-gme-2024-avec-la-serie-de-gmt-associes/" target="_blank">Documentation</a> avec une version csv téléchargeable du référentiel des GME-GMT 2024</p>
<p>Ligne 8 : renommage des variables avec le suffixe <code>_2023</code>en prévision du calcul du tibble <code>same_dzf_fzf_zf</code> pour assurer la jointure</p>
<p>Ligne 22 : <code>dplyr::filter(!same_gmt_type_zf)</code> est un raccourci pour <code>same_gmt_type_zf == FALSE</code></p>
<p><a href="http://www.lespmsi.com/scripts-pmsi-r/" target="_blank">Etre tenu au courant de la publication des nouveaux scripts PMSI R</a></p>


</section>

 ]]></description>
  <category>SMR</category>
  <category>GME</category>
  <guid>https://www.datapmsi.com/posts/smr/script_smr_evolution_dzf_fzf_zf/</guid>
  <pubDate>Wed, 11 Sep 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Casemix basique Intervenant CSARR</title>
  <dc:creator>denis Gustin</dc:creator>
  <link>https://www.datapmsi.com/posts/smr/script_smr_casemix_intervenant/</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Par type d’intervenant représenté dans le jeu de données, on calcule le nombre de codages CSARR, le nombre d’actes différents CSARR codés, le nombre de réalisations CSARR cumulées et le % représenté par ce nombre de réalisations CSARR par rapport au nombre total de réalisations du jeu de données.</p>
<p>On rapatrie le libellé du type intervenant via le référentiel <code>csarr_intervenant</code> <sup>1</sup> du package <code>refpmsi</code></p>
</section>
<section id="code" class="level2">
<h2 class="anchored" data-anchor-id="code">Code</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(refpmsi)</span>
<span id="cb1-3"></span>
<span id="cb1-4">csarr_intervenant <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> refpmsi<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">refpmsi</span>(csarr_intervenant)</span>
<span id="cb1-5"></span>
<span id="cb1-6">casemix_csarr_intervenant <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> smr_rhs<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>csarr <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-7">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(code_csarr,nb_realisation_csarr,code_intervenant_csarr) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-8">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(code_intervenant_csarr) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-9">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nb_acte_csarr =</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>(),</span>
<span id="cb1-10">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nb_acte_different_csarr =</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n_distinct</span>(code_csarr),</span>
<span id="cb1-11">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nb_realisation_csarr =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(nb_realisation_csarr)</span>
<span id="cb1-12">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-13">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(nb_realisation_csarr)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-14">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">percent_realisation_csarr =</span> nb_realisation_csarr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(nb_realisation_csarr)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-15">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(csarr_intervenant, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">join_by</span>(code_intervenant_csarr <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> csarr_intervenant_code)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-16">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(code_intervenant_csarr,csarr_intervenant_libelle,nb_acte_csarr,nb_acte_different_csarr,</span>
<span id="cb1-17">                  nb_realisation_csarr,percent_realisation_csarr)</span>
<span id="cb1-18">casemix_csarr_intervenant</span></code></pre></div>
</div>
</section>
<section id="commentaires" class="level2">
<h2 class="anchored" data-anchor-id="commentaires">Commentaires</h2>
<p>Ligne 6 : <code>smr_rhs$csarr</code> est un tibble des variables <code>csarr</code> liées aux RHS</p>
<p>Ligne 16 : le <code>dplyr::select()</code> permet de réordonner les variables</p>
<p>Ce casemix est disponible dans <a href="https://www.pmsisoft.com/acces_pmsisoft_ssr" target="_blank">PMSISoft SMR</a> dans l’écran <code>Codage CSARR &gt; Casemix CSARR &gt; Casemix Intervenant</code></p>
<p><a href="http://www.lespmsi.com/scripts-pmsi-r/" target="_blank">Etre tenu au courant de la publication des nouveaux scripts PMSI R</a></p>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Notes de bas de page</h2>

<ol>
<li id="fn1"><p>Documentation du référentiel <a href="https://denisgustin.github.io/refpmsi/articles/csarr.html#csarr-intervenant" target="_blank">csarr_intervenant</a>↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>SMR</category>
  <category>CSARR</category>
  <category>Casemix</category>
  <guid>https://www.datapmsi.com/posts/smr/script_smr_casemix_intervenant/</guid>
  <pubDate>Mon, 10 Jun 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Dépendance physique maximale des séjours HC</title>
  <dc:creator>denis Gustin</dc:creator>
  <link>https://www.datapmsi.com/posts/smr/script_smr_sejour_hc_dependance_physique_maximale/</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>On calcule la dépendance physique de chaque RHS, puis, par séjour HC, on calcule la dépendance physique maximale parmi le ou les RHS du séjour</p>
</section>
<section id="code" class="level2">
<h2 class="anchored" data-anchor-id="code">Code</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb1-2"></span>
<span id="cb1-3">sejour_dependance_physique_maximale <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> smr_rhs<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>rhs <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-4">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(nas,no_semaine,type_hospitalisation,dependance_alimentation,dependance_deplacement,dependance_habillage,dependance_continence) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-5">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(type_hospitalisation <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-6">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dependance_physique_rhs =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rowSums</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">across</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(dependance_alimentation,dependance_deplacement,</span>
<span id="cb1-7">                                                             dependance_habillage,dependance_continence)))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-8">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.by =</span> nas,</span>
<span id="cb1-9">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dependance_physique_maximale_sejour =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(dependance_physique_rhs)</span>
<span id="cb1-10">                  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-11">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">distinct</span>(nas,dependance_physique_maximale_sejour)</span>
<span id="cb1-12">sejour_dependance_physique_maximale</span></code></pre></div>
</div>
</section>
<section id="commentaires" class="level2">
<h2 class="anchored" data-anchor-id="commentaires">Commentaires</h2>
<p>Ligne 3 : <code>smr_rhs$rhs</code> est un tibble des variables de la partie fixe des RHS</p>
<p>Ligne 6-7 : <code>rowSums()</code> pour permettre un calcul de somme ligne à ligne</p>
<p>Pour aller + loin :<br>
Démarche identique pour calculer la dépendance cognitive maximale d’un séjour</p>
<p>La variable <code>dependance_physique_maximale_sejour</code> est calculée par défaut dans les écrans <a href="https://www.pmsisoft.com/acces_pmsisoft_ssr" target="_blank">PMSISoft SMR</a></p>
<p><a href="http://www.lespmsi.com/scripts-pmsi-r/" target="_blank">Etre tenu au courant de la publication des nouveaux scripts PMSI R</a></p>


</section>

 ]]></description>
  <category>SMR</category>
  <category>Dépendance</category>
  <guid>https://www.datapmsi.com/posts/smr/script_smr_sejour_hc_dependance_physique_maximale/</guid>
  <pubDate>Sun, 09 Jun 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>RHS CM 08 d’au moins 5 JP avec 0 acte CSARR</title>
  <dc:creator>denis Gustin</dc:creator>
  <link>https://www.datapmsi.com/posts/smr/script_smr_rhs_cm08_no_acte_csarr/</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Un contrôle qualité classique.</p>
<p>On filtre les RHS sur les 3 variables <code>cm</code>, <code>nb_jp_rhs</code> (à produire) et <code>nb_csarr</code></p>
</section>
<section id="code" class="level2">
<h2 class="anchored" data-anchor-id="code">Code</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb1-2"></span>
<span id="cb1-3">rhs_selected <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> smr_rhs<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>rhs <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-4">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(nas,no_semaine,no_um,cm,jp_we,jp_hors_we,nb_csarr) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-5">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">across</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(jp_we,jp_hors_we), <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> stringr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_count</span>(.x,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1"</span>)),</span>
<span id="cb1-6">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nb_jp_rhs =</span> jp_we<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>jp_hors_we) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-7">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(cm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"08"</span>, nb_jp_rhs <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, nb_csarr <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb1-8">rhs_selected</span></code></pre></div>
</div>
</section>
<section id="commentaires" class="level2">
<h2 class="anchored" data-anchor-id="commentaires">Commentaires</h2>
<p>Ligne 3 : <code>smr_rhs$rhs</code> est un tibble des variables de la partie fixe des RHS</p>
<p>Ligne 5-6 : voir script SMR “Nombre de JP par RHS”</p>
<p>Cette requêtes est réalisable dans <a href="https://www.pmsisoft.com/acces_pmsisoft_ssr" target="_blank">PMSISoft SMR</a> dans l’écran <code>RHS &gt; Base des RHS</code> via le filtrage de périmètre <code>cm == "08"</code> et le filtrage de variable <code>nb_jp_rhs Supérieur ou égal à 5 ET nb_acte_csarr Egal à 0</code></p>
<p><a href="http://www.lespmsi.com/scripts-pmsi-r/" target="_blank">Etre tenu au courant de la publication des nouveaux scripts PMSI R</a></p>


</section>

 ]]></description>
  <category>SMR</category>
  <category>RHS</category>
  <guid>https://www.datapmsi.com/posts/smr/script_smr_rhs_cm08_no_acte_csarr/</guid>
  <pubDate>Sat, 08 Jun 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Rapatriement libellé CSARR</title>
  <dc:creator>denis Gustin</dc:creator>
  <link>https://www.datapmsi.com/posts/smr/script_smr_rapatriement_libelle_csarr/</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Script ultra-classique permettant de rapatrier un libellé, ici libellé des actes CSARR</p>
<p>A partir du référentiel annualisé des actes CSARR<sup>1</sup>, on créé un référentiel dédoublonné des seuls libellés par acte CSARR. Puis on rattache ce référentiel à la table des actes CSARR produite à partir des “blocs CSARR” des RHS.</p>
</section>
<section id="code" class="level2">
<h2 class="anchored" data-anchor-id="code">Code</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(refpmsi)</span>
<span id="cb1-3"></span>
<span id="cb1-4">csarr_code <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> refpmsi<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">refpmsi</span>(csarr_code)</span>
<span id="cb1-5"></span>
<span id="cb1-6">csarr_libelle <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  csarr_code <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slice_head</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> csarr_code) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(csarr_code,csarr_libelle)</span>
<span id="cb1-7"></span>
<span id="cb1-8">csarr_extend <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> smr_rhs<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>csarr <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-9">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(code_csarr) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-10">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(csarr_libelle, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">join_by</span>(code_csarr <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> csarr_code))</span>
<span id="cb1-11">csarr_extend</span></code></pre></div>
</div>
</section>
<section id="commentaires" class="level2">
<h2 class="anchored" data-anchor-id="commentaires">Commentaires</h2>
<p>Ligne 8 : <code>smr_rhs$csarr</code> est un tibble des variables <code>csarr</code> liées à chaque RHS</p>
<p>La variable <code>csarr_libelle</code> est rapatriée par défaut dans tous les écrans <a href="https://www.pmsisoft.com/acces_pmsisoft_ssr" target="_blank">PMSISoft SMR</a></p>
<p><a href="http://www.lespmsi.com/scripts-pmsi-r/" target="_blank">Etre tenu au courant de la publication des nouveaux scripts PMSI R</a></p>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Notes de bas de page</h2>

<ol>
<li id="fn1"><p>Documentation du référentiel <a href="https://denisgustin.github.io/refpmsi/articles/csarr.html#csarr-code" target="_blank">csarr_code</a>↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>SMR</category>
  <category>CSARR</category>
  <guid>https://www.datapmsi.com/posts/smr/script_smr_rapatriement_libelle_csarr/</guid>
  <pubDate>Fri, 07 Jun 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Nombre de JP par RHS</title>
  <dc:creator>denis Gustin</dc:creator>
  <link>https://www.datapmsi.com/posts/smr/script_smr_nombre_jp_rhs/</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Pour chaque RHS, on compte le nombre de “1” dans les variables natives <code>jp_hors_we</code> et <code>jp_we</code>, en écrasant leur valeur initiale (suite de “0” et de “1”) par la valeur calculée, puis on additionne ces 2 variables.</p>
</section>
<section id="code" class="level2">
<h2 class="anchored" data-anchor-id="code">Code</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb1-2"></span>
<span id="cb1-3">rhs_extend <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> smr_rhs<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>rhs <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-4">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(nas,no_semaine,no_um,jp_we,jp_hors_we) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-5">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">across</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(jp_we,jp_hors_we), <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> stringr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_count</span>(.x,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1"</span>)),</span>
<span id="cb1-6">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nb_jour_rhs =</span> jp_we<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>jp_hors_we)</span>
<span id="cb1-7">rhs_extend</span></code></pre></div>
</div>
</section>
<section id="commentaires" class="level2">
<h2 class="anchored" data-anchor-id="commentaires">Commentaires</h2>
<p>Ligne 3 : <code>smr_rhs$rhs</code> est un tibble des variables de la partie fixe des RHS</p>
<p>Ligne 5 : utilisation classique de la fonction <code>dplyr::àcross()</code> pour appliquer un même traitement à plusieurs variables en une seule ligne</p>
<p>La variable <code>nb_jour_rhs</code> est calculée par défaut dans tous les écrans <a href="https://www.pmsisoft.com/acces_pmsisoft_ssr" target="_blank">PMSISoft SMR</a></p>
<p><a href="http://www.lespmsi.com/scripts-pmsi-r/" target="_blank">Etre tenu au courant de la publication des nouveaux scripts PMSI R</a></p>


</section>

 ]]></description>
  <category>SMR</category>
  <category>RHS</category>
  <guid>https://www.datapmsi.com/posts/smr/script_smr_nombre_jp_rhs/</guid>
  <pubDate>Thu, 06 Jun 2024 22:00:00 GMT</pubDate>
</item>
</channel>
</rss>
