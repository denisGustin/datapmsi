<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Data PMSI</title>
<link>https://www.datapmsi.com/scripts_mco.html</link>
<atom:link href="https://www.datapmsi.com/scripts_mco.xml" rel="self" type="application/rss+xml"/>
<description>Codes et formations R pour les PMSI MCO, SMR, PSY et HAD</description>
<generator>quarto-1.4.551</generator>
<lastBuildDate>Sat, 12 Oct 2024 22:00:00 GMT</lastBuildDate>
<item>
  <title>Identification et comptage des séjours COVID-19 et grippe</title>
  <dc:creator>denis Gustin</dc:creator>
  <link>https://www.datapmsi.com/posts/mco/script_mco_sejour_covid_grippe/</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>On renvoie à l’article <a href="https://www.lespmsi.com/hospitalisation-et-codage-covid-19-et-grippe-entre-2018-et-2022/" target="_blank">“Hospitalisation et codage COVID-19 et grippe entre 2018 et 2022”</a> pour les enjeux et les codes d’identification des séjours COVID-19 et grippe via la CIM-10.</p>
<p>Ce script identifie les séjours COVID-19 et les séjours grippe, puis calcule leur nombre respectif et le ratio nb_sejours_covid/nb_sejours_grippe</p>
</section>
<section id="code" class="level2">
<h2 class="anchored" data-anchor-id="code">Code</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb1-2"></span>
<span id="cb1-3">sejours_covid_grippe <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> mco_rss<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>rum <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-4">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(no_rss,nas,dp_rum,dr_rum) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-5">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">across</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(dp_rum,dr_rum), <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> stringr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_sub</span>(.x,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.names =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"{col}_groupe"</span>),</span>
<span id="cb1-6">                  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">across</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(dp_rum,dr_rum), <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> stringr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_sub</span>(.x,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.names =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"{col}_sous_groupe"</span>),</span>
<span id="cb1-7">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.keep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"unused"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-8">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.by =</span> no_rss,</span>
<span id="cb1-9">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sejour_grippe =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">any</span>(dp_rum_groupe <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"J09"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"J10"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"J11"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span>dr_rum_groupe <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"J09"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"J10"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"J11"</span>)),</span>
<span id="cb1-10">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sejour_covid =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">any</span>(dp_rum_sous_groupe <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"U071"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"U072"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span>dr_rum_sous_groupe <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"U071"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"U072"</span>))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-11">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nb_sejour_covid =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(sejour_covid, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">na.rm =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>),</span>
<span id="cb1-12">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nb_sejour_grippe =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(sejour_grippe, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">na.rm =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-13">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ratio_sejour_covid_grippe =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(nb_sejour_grippe <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,nb_sejour_covid<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>nb_sejour_grippe,<span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA</span>))</span>
<span id="cb1-14">sejours_covid_grippe</span></code></pre></div>
</div>
</section>
<section id="commentaires" class="level2">
<h2 class="anchored" data-anchor-id="commentaires">Commentaires</h2>
<p>Ligne 3 : <code>mco_rss$rum</code> est un tibble des variables de la partie fixe des RUM</p>
<p>Ligne 4 : les utilisateurs de l’accès PMSISoft Professionnel peuvent remplacer les 2 variables <code>dp_rum</code> et <code>dr_rum</code>par les variables <code>dp_sejour</code> et <code>dr_sejour</code> pour identifier les séjours aux niveaux des DP et DR séjour</p>
<p>Ligne 5 : calcul des variables <code>dp_rum_groupe</code>et <code>dr_rum_groupe</code> pour préparer l’identification des séjours grippe</p>
<p>Ligne 6 : calcul des variables <code>dp_rum_sous_groupe</code>et <code>dr_rum_sous_groupe</code> pour préparer l’identification des séjours COVID-19</p>
<p>Ligne 7 : on décide de ne pas garder les variables natives <code>dp_rum</code>et <code>dr_rum</code></p>
<p>Ligne 9 : identification d’une séjours grippe via une variable logique <code>sejour_grippe</code> qui vaut <code>TRUE</code>si, par séjour, au moins un <code>dp_rum_groupe</code> des RUM du séjour, a la valeur “J09”,“J10”,“J11” ou si au moins un <code>dr_rum_groupe</code> des RUM du séjour a la valeur “J09”,“J10”,“J11”</p>
<p>Ligne 13 : gestion de la situation extrême où nb_sejour_grippe == 0</p>
<p><a href="http://www.lespmsi.com/scripts-pmsi-r/" target="_blank">Etre tenu au courant de la publication des nouveaux scripts PMSI R</a></p>


</section>

 ]]></description>
  <category>MCO</category>
  <category>CIM-10</category>
  <guid>https://www.datapmsi.com/posts/mco/script_mco_sejour_covid_grippe/</guid>
  <pubDate>Sat, 12 Oct 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Repérage des accouchements</title>
  <dc:creator>denis Gustin</dc:creator>
  <link>https://www.datapmsi.com/posts/mco/script_mco_reperage_accouchement/</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>On produit le vecteur des actes CCAM d’accouchement à partir du référentiel <code>ovalide_ccaminfo</code> du package <code>refpmsi</code></p>
<p>On identifie ensuite les actes CCAM qui sont des actes d’acccouchement puis on produit la liste des séjours concernés par un accouchement.</p>
</section>
<section id="code" class="level2">
<h2 class="anchored" data-anchor-id="code">Code</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(refpmsi)</span>
<span id="cb1-3"></span>
<span id="cb1-4">ovalide_ccaminfo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> refpmsi<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">refpmsi</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ovalide_ccaminfo"</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2024</span>)</span>
<span id="cb1-5"></span>
<span id="cb1-6">vect_acte_accouchement <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> ovalide_ccaminfo <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(ACCOUCHEMENT <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull</span>(ccam_code)</span>
<span id="cb1-7"></span>
<span id="cb1-8">rum_accouchement <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> mco_rss<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>ccam <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-9">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(no_rss,nas,no_rum,code_ccam) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-10">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">is_accouchement =</span> code_ccam <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> vect_acte_accouchement) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-11">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(is_accouchement) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-12">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">distinct</span>(no_rss,nas,no_rum)</span>
<span id="cb1-13">rum_accouchement</span></code></pre></div>
</div>
</section>
<section id="commentaires" class="level2">
<h2 class="anchored" data-anchor-id="commentaires">Commentaires</h2>
<p>Ligne 4 : on récupère le référentiel <code>ovalide_ccaminfo</code> via le package <code>refpmsi::</code> et on se restreint à la seule année 2024, car la liste des actes CCAM d’accouchement ne change pas depuis au moins 2020</p>
<p>Ligne 6 : production du vecteur des actes CCAM d’accouchement</p>
<p>Ligne 8 : <code>mco_rss$ccam</code> est un tibble des variables CCAM liées aux RUM. Voir <a href="http://localhost:3479/guide_post.html#via-pmsisoft-standard">Guide des scripts - Jeux de données</a></p>
<p>Ligne 11 : raccourci pour <code>dplyr::filter(is_accouchement == TRUE)</code></p>
<p>Cette requête est réalisable dans <a href="https://www.pmsisoft.com/acces_pmsisoft_mco" target="_blank">PMSISoft MCO</a> dans l’écran <code>CCAM &gt; Base des actes CCAM</code> via le filtrage de variables <code>code_ccam Contient codes des actes d'accoucheemnt</code></p>
<p><a href="http://www.lespmsi.com/scripts-pmsi-r/" target="_blank">Etre tenu au courant de la publication des nouveaux scripts PMSI R</a></p>


</section>

 ]]></description>
  <category>MCO</category>
  <category>CCAM</category>
  <guid>https://www.datapmsi.com/posts/mco/script_mco_reperage_accouchement/</guid>
  <pubDate>Tue, 10 Sep 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Séjours RAAC</title>
  <dc:creator>denis Gustin</dc:creator>
  <link>https://www.datapmsi.com/posts/mco/script_mco_sejours_raac/</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Rappel : la variable <code>raac</code> (variable de la partie fixe des RUM) a 3 valeurs possibles (NA, 1 “Prise en charge RAAC”, 2 “Pas de prise en charge RAAC”)</p>
<p>On calcule une variable logique <code>sejour_raac</code>par séjour qui vaut TRUE si le séjour a au moins 1 RUM avec la variable <code>raac</code> == 1 et FALSE sinon.</p>
</section>
<section id="code" class="level2">
<h2 class="anchored" data-anchor-id="code">Code</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb1-2"></span>
<span id="cb1-3">sejour_raac <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> mco_rss<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>rum <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-4">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(nas,no_rss,no_rum,raac) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-5">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.by =</span> no_rss,</span>
<span id="cb1-6">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">raac_sejour =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">any</span>(raac <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">na.rm =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-7">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">distinct</span>(nas,no_rss,raac_sejour)</span>
<span id="cb1-8">sejour_raac</span></code></pre></div>
</div>
</section>
<section id="commentaires" class="level2">
<h2 class="anchored" data-anchor-id="commentaires">Commentaires</h2>
<p>Ligne 3 : <code>mco_rss$rum</code> est un tibble des variables de la partie fixe des RUM. Voir <a href="http://localhost:3479/guide_post.html#via-pmsisoft-standard">Guide des scripts - Jeux de données</a></p>
<p>Ligne 6 : l’argument <code>na.rm = TRUE</code> de la fonction <code>àny()</code> gère le cas où la variable <code>raac</code> des RUM est NA</p>
<p>Ligne 7 : on passe d’un tibble de RUM à un tibble de séjours via le <code>dplyr::distinct()</code> de variables liées au séjour</p>
<p>Les séjours RAAC sont filtrables dans tous les écrans de <a href="https://www.pmsisoft.com/acces_pmsisoft_mco" target="_blank">PMSISoft MCO</a> via le filtrage de variables <code>sejour_raac TRUE</code></p>
<p><a href="http://www.lespmsi.com/scripts-pmsi-r/" target="_blank">Etre tenu au courant de la publication des nouveaux scripts PMSI R</a></p>


</section>

 ]]></description>
  <category>MCO</category>
  <guid>https://www.datapmsi.com/posts/mco/script_mco_sejours_raac/</guid>
  <pubDate>Tue, 10 Sep 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Extraction partie d’une chaîne de caractères</title>
  <dc:creator>denis Gustin</dc:creator>
  <link>https://www.datapmsi.com/posts/mco/script_mco_extraction_string/</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>string = chaîne de caractères</p>
<p>On distingue 3 situations (string à taille fixe, string à taille variable, string de type date) illustrées chacune par un traitement</p>
</section>
<section id="string-à-taille-fixe" class="level2">
<h2 class="anchored" data-anchor-id="string-à-taille-fixe">String à taille fixe</h2>
<p>On repère les séjours de complexité 3 ou 4</p>
<section id="code" class="level3">
<h3 class="anchored" data-anchor-id="code">Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb1-2"></span>
<span id="cb1-3">sejour_niveau_3_4 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> mco_rss<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>rum <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-4">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(nas,no_rss,no_rum,ghm) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-5">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">is_niveau_3_4 =</span> stringr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_sub</span>(ghm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">start =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">end =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'3'</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'4'</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-6">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(is_niveau_3_4) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-7">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">distinct</span>(nas,no_rss,ghm)</span>
<span id="cb1-8">sejour_niveau_3_4</span></code></pre></div>
</div>
</section>
<section id="commentaires" class="level3">
<h3 class="anchored" data-anchor-id="commentaires">Commentaires</h3>
<p>Ligne 3 : <code>mco_rss$rum</code> est un tibble des variables de la partie fixe des RUM. Voir <a href="http://localhost:3479/guide_post.html#via-pmsisoft-standard">Guide des scripts - Jeux de données</a></p>
<p>Ligne 5 : <code>stringr::str_sub(ghm, start = 6, end = 6)</code> isole la complexite du GHM</p>
<p>Ligne 6 : raccourci pour <code>dplyr::filter(is_niveau_3_4 == TRUE)</code></p>
<p>Ligne 7 : le <code>dplyr::distinct()</code> sur des variables liées au séjour fait passer le tibble d’un tibble de RUM à un tibble de séjours</p>
<p>Le script est pédagogique car, en pratique, on dispose généralement de la variable <code>complexite</code> par défaut.</p>
<p>Le filtrage sur la complexité est disponible dans tous les écrans <a href="https://www.pmsisoft.com/acces_pmsisoft_mco" target="_blank">PMSISoft MCO</a></p>
</section>
</section>
<section id="string-à-taille-variable" class="level2">
<h2 class="anchored" data-anchor-id="string-à-taille-variable">String à taille variable</h2>
<p>On repère les codages CIM-10 terminés par un 9</p>
<section id="code-1" class="level3">
<h3 class="anchored" data-anchor-id="code-1">Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb2-2"></span>
<span id="cb2-3">codage_das_9 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> mco_rss<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>das <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb2-4">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(nas,no_rss,no_rum,das) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb2-5">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">is_das_9 =</span> stringr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(das, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pattern =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"9$"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb2-6">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(is_das_9)</span>
<span id="cb2-7">codage_das_9</span></code></pre></div>
</div>
</section>
<section id="commentaires-1" class="level3">
<h3 class="anchored" data-anchor-id="commentaires-1">Commentaires</h3>
<p>Ligne 3 : <code>mco_rss$das</code> est un tibble des variables <code>das</code> associées aux RUM. Voir <a href="http://localhost:3479/guide_post.html#via-pmsisoft-standard">Guide des scripts - Jeux de données</a></p>
<p>Ligne 5 : le repérage des codes CIM-10 recherchés se fait via le regex très simple <code>9$</code> qui signifie “un 9 en dernière position”</p>
<p>Le filtrage par regex sur un codage est disponible dans tous les écrans <a href="https://www.pmsisoft.com/acces_pmsisoft_mco" target="_blank">PMSISoft MCO</a></p>
</section>
</section>
<section id="string-date" class="level2">
<h2 class="anchored" data-anchor-id="string-date">String date</h2>
<p>On produit la variable <code>mois_sortie_um</code></p>
<section id="code-2" class="level3">
<h3 class="anchored" data-anchor-id="code-2">Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb3-2"></span>
<span id="cb3-3">rum_extended <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> mco_rss<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>rum <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb3-4">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(nas,no_rss,no_um,date_sortie_um) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb3-5">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mois_sortie_um =</span> stringr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_sub</span>(date_sortie_um,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>),</span>
<span id="cb3-6">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mois_sortie_um_label =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.character</span>(lubridate<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">month</span>(date_sortie_um, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">abbr =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">locale =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Sys.getlocale</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"LC_TIME"</span>))))</span>
<span id="cb3-7">rum_extended</span></code></pre></div>
</div>
</section>
<section id="commentaires-2" class="level3">
<h3 class="anchored" data-anchor-id="commentaires-2">Commentaires</h3>
<p>Ligne 3 : <code>mco_rss$rum</code> est un tibble des variables de la partie fixe des RUM. Voir <a href="http://localhost:3479/guide_post.html#via-pmsisoft-standard">Guide des scripts - Jeux de données</a></p>
<p>Ligne 6 : <code>mois_sortie_um_lable</code>est une alternative au code la ligne 5 permettant d’obtenir directement le mois de sortie de l’UM avec son intitulé en français (ex : “janvier”)</p>
<p>La variable <code>mois_sortie_um</code> est calculée par défaut dans tous les écrans <a href="https://www.pmsisoft.com/acces_pmsisoft_mco" target="_blank">PMSISoft MCO</a></p>
<p><a href="http://www.lespmsi.com/scripts-pmsi-r/" target="_blank">Etre tenu au courant de la publication des nouveaux scripts PMSI R</a></p>


</section>
</section>

 ]]></description>
  <category>MCO</category>
  <guid>https://www.datapmsi.com/posts/mco/script_mco_extraction_string/</guid>
  <pubDate>Sun, 08 Sep 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>IPDMS par GHM</title>
  <dc:creator>denis Gustin</dc:creator>
  <link>https://www.datapmsi.com/posts/mco/script_mco_ipdms_ghm/</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>On se restreint aux séjours de sévérité 1,2,3 ou 4 d’au moins 1 nuitée et on suppose qu’on est en ex-DGF</p>
<p>Pour chaque séjour, on rapatrie la DMS OVALIDE correspondant au GHM du séjour via le référentiel <code>ovalide_ghminfo_dgf</code><sup>1</sup> du package <code>refpmsi</code></p>
<p>Pour chaque GHM, on calcule le nombre de séjours, le cumul des JP de ces séjours, le nombre de journées théoriques et l’IPDMS au sens “nombre de journées établissement / nombre de journées théoriques pour le périmètre considéré.”</p>
</section>
<section id="code" class="level2">
<h2 class="anchored" data-anchor-id="code">Code</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(refpmsi)</span>
<span id="cb1-3"></span>
<span id="cb1-4">ovalide_ghminfo_dgf <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> refpmsi<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">refpmsi</span>(ovalide_ghminfo_dgf)</span>
<span id="cb1-5"></span>
<span id="cb1-6">casemix_ghm_ipdms <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> mco_rss<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>rum <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-7">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(nas,no_rss,ghm,complexite,date_entree_um,date_sortie_um) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-8">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.by =</span> no_rss, </span>
<span id="cb1-9">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">date_entree_sejour =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min</span>(date_entree_um), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">date_sortie_sejour =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(date_sortie_um),</span>
<span id="cb1-10">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nb_jp_sejour =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.integer</span>(date_sortie_sejour<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>date_entree_sejour)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-11">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">distinct</span>(no_rss,ghm,complexite,date_sortie_sejour,nb_jp_sejour) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-12">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">annee_sortie_sejour =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.character</span>(lubridate<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">year</span>(date_sortie_sejour)),</span>
<span id="cb1-13">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mois_sortie_sejour =</span> lubridate<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">month</span>(date_sortie_sejour),</span>
<span id="cb1-14">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">annee_pmsi_sejour =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(mois_sortie_sejour <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>,<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.character</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.integer</span>(annee_sortie_sejour)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>L),annee_sortie_sejour)</span>
<span id="cb1-15">                  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-16">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(complexite <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"3"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"4"</span>), nb_jp_sejour <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>L) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-17">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(ovalide_ghminfo_dgf <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(annee_pmsi,ghm,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dms_ovalide_ghm =</span> dms),</span>
<span id="cb1-18">                     <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">join_by</span>(ghm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> ghm, annee_pmsi_sejour <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> annee_pmsi)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-19">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nb_jp_theorique_sejour =</span> dms_ovalide_ghm<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>nb_jp_sejour) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-20">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(ghm) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-21">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nb_sejour_ghm =</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>(),</span>
<span id="cb1-22">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nb_jp_sejour_ghm =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(nb_jp_sejour),</span>
<span id="cb1-23">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nb_jp_theorique_ghm =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(nb_jp_theorique_sejour)</span>
<span id="cb1-24">                     ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-25">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ipdms_ghm =</span> nb_jp_sejour_ghm<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>nb_jp_theorique_ghm)</span>
<span id="cb1-26">casemix_ghm_ipdms <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> View</span></code></pre></div>
</div>
</section>
<section id="commentaires" class="level2">
<h2 class="anchored" data-anchor-id="commentaires">Commentaires</h2>
<p>Ligne 6 : <code>mco_rss$rum</code> est un tibble des variables de la partie fixe des RUM. Voir <a href="http://localhost:3479/guide_post.html#via-pmsisoft-standard">Guide des scripts - Jeux de données</a></p>
<p>Ligne 11 : on passe d’un tibble de RUM à un tibble de séjours via le <code>dplyr::distinct()</code> de variables liées au séjour</p>
<p>Ligne 12 : forçage <code>annee_sortie_sejour</code> en character pour préparer la jointure avec la variable ànnee_pmsi<code>de ovalide_ghminfo_dgf</code> qui est character</p>
<p>Pour aller + loin :<br>
Calcul de l’écart à la moyenne en nb_jp avec nb_jp_theorique_ghm<br>
Rapatriemeent libellé des GHM<br>
Etc …</p>
<p>L’IP-DMS est calculé dans <a href="https://www.pmsisoft.com/acces_pmsisoft_mco" target="_blank">PMSISoft MCO</a> dans l’écran <code>Séjour &gt; Séjours et classification &gt; Casemix GHM</code></p>
<p><a href="http://www.lespmsi.com/scripts-pmsi-r/" target="_blank">Etre tenu au courant de la publication des nouveaux scripts PMSI R</a></p>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Notes de bas de page</h2>

<ol>
<li id="fn1"><p>Documentation du référentiel <a href="https://denisgustin.github.io/refpmsi/articles/ghm.html#ovalide---table-ghminfo_exdgf" target="_blank">ovalide_ghminfo_dgf</a>↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>MCO</category>
  <category>GHM</category>
  <category>Casemix</category>
  <guid>https://www.datapmsi.com/posts/mco/script_mco_ipdms_ghm/</guid>
  <pubDate>Mon, 10 Jun 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Casemix basique séjours par complexité</title>
  <dc:creator>denis Gustin</dc:creator>
  <link>https://www.datapmsi.com/posts/mco/script_mco_casemix_sejour_severite/</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Le complexité correspond à la 6eme position des GHM, appelée aussi de manière plus imprécise “sévérité”</p>
<p>On calcule, par complexité rencontrée au moins 1 fois dans le jeu de données, le nombre de séjours groupés avec cette complexité, ainsi le nombre de JP de ces séjours et le % de ces séjours par rapport au nombre total de séjours.</p>
</section>
<section id="code" class="level2">
<h2 class="anchored" data-anchor-id="code">Code</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb1-2"></span>
<span id="cb1-3">casemix_complexite <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> mco_rss<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>rum <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-4">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(nas,no_rss,no_rum,ghm,complexite,date_entree_um,date_sortie_um) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-5">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nb_jp_rum =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.integer</span>(date_sortie_um<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>date_entree_um)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-6">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.by =</span> no_rss, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nb_jp_sejour =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(nb_jp_rum)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-7">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(nb_jp_sejour <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-8">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">distinct</span>(no_rss,complexite,nb_jp_sejour) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-9">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(complexite) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-10">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nb_sejour_complexite =</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>(),</span>
<span id="cb1-11">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nb_jp_complexite =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(nb_jp_sejour)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-12">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(nb_sejour_complexite)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-13">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">percent_sejour_complexite =</span> nb_sejour_complexite<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(nb_sejour_complexite))</span>
<span id="cb1-14">casemix_complexite</span></code></pre></div>
</div>
</section>
<section id="commentaires" class="level2">
<h2 class="anchored" data-anchor-id="commentaires">Commentaires</h2>
<p>Ligne 3 : <code>mco_rss$rum</code> est un tibble des variables de la partie fixe des RUM. Voir <a href="http://localhost:3479/guide_post.html#via-pmsisoft-standard">Guide des scripts - Jeux de données</a></p>
<p>Ligne 8 : ce <code>dplyr::distinct()</code> sur des variables liées au séjour fait passer le tibble d’un tibble de RUM à un tibble de séjours</p>
<p>Ce casemix est disponible dans <a href="https://www.pmsisoft.com/acces_pmsisoft_mco" target="_blank">PMSISoft MCO</a> dans l’écran <code>Séjours &gt; Séjours et classification</code></p>
<p><a href="http://www.lespmsi.com/scripts-pmsi-r/" target="_blank">Etre tenu au courant de la publication des nouveaux scripts PMSI R</a></p>


</section>

 ]]></description>
  <category>MCO</category>
  <category>Casemix</category>
  <guid>https://www.datapmsi.com/posts/mco/script_mco_casemix_sejour_severite/</guid>
  <pubDate>Sun, 09 Jun 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Valorisation T2A des suppléments REA</title>
  <dc:creator>denis Gustin</dc:creator>
  <link>https://www.datapmsi.com/posts/mco/script_mco_valorisation_t2a_supplement_REA/</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>On suppose qu’on est en ex-DGF</p>
<p>On associe au <code>nb_supplements_rea</code> (variable native des <code>rsa</code>) le tarif unitaire du supplément REA correspondant à l’année PMSI du séjour.</p>
<p>Ce tarif du supplément REA est récupéré via le référentiel annualisé <code>supplements_mco_public</code> du package <code>refpmsi</code></p>
</section>
<section id="code" class="level2">
<h2 class="anchored" data-anchor-id="code">Code</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(refpmsi)</span>
<span id="cb1-3"></span>
<span id="cb1-4">supplements_mco_public <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> refpmsi<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">refpmsi</span>(supplements_mco_public)</span>
<span id="cb1-5"></span>
<span id="cb1-6">supplements_rea_t2a <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> mco_rsa<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>rsa <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-7">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(no_sequentiel_sejour,mois_sortie_sejour,annee_sortie_sejour,nb_supplements_rea) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-8">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">annee_pmsi_sejour =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(mois_sortie_sejour <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"02"</span>,<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.character</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.integer</span>(annee_sortie_sejour)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>L),annee_sortie_sejour)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-9">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(supplements_mco_public <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(supplement_mco_code <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"REA"</span>),</span>
<span id="cb1-10">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">join_by</span>(annee_pmsi_sejour <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> annee_pmsi)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-11">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">supplements_rea_t2a =</span> nb_supplements_rea<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>supplement_mco_tarif)</span>
<span id="cb1-12">supplements_rea_t2a</span>
<span id="cb1-13"></span>
<span id="cb1-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Calcul du cumul de la valorisation T2A brute des suppléments REA</span></span>
<span id="cb1-15">total_supplements_rea_t2a <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(supplements_rea_t2a<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>supplements_rea_t2a)</span>
<span id="cb1-16">total_supplements_rea_t2a</span></code></pre></div>
</div>
</section>
<section id="commentaires" class="level2">
<h2 class="anchored" data-anchor-id="commentaires">Commentaires</h2>
<p>Ligne 6 : <code>mco_rsa$rsa</code> est un tibble des variables de la partie fixe des RSA. Voir <a href="http://localhost:3479/guide_post.html#via-pmsisoft-standard">Guide des scripts - Jeux de données</a></p>
<p>Ligne 8 : calcul de la variable <code>annee_pmsi_sejour</code> à partir des 2 variables <code>mois_sortie_sejour</code> et <code>annee_sortie_sejour</code> (variables natives <code>rsa</code>)</p>
<p>Les valorisations T2A brutes des suppléments sont calculées dans l’écran <code>Activité MCO &gt; Synthèse T2A</code> de <a href="https://www.pmsisoft.com/acces_pmsisoft_mco" target="_blank">PMSISoft MCO</a></p>
<p><a href="http://www.lespmsi.com/scripts-pmsi-r/" target="_blank">Etre tenu au courant de la publication des nouveaux scripts PMSI R</a></p>


</section>

 ]]></description>
  <category>MCO</category>
  <category>T2A</category>
  <guid>https://www.datapmsi.com/posts/mco/script_mco_valorisation_t2a_supplement_REA/</guid>
  <pubDate>Sun, 09 Jun 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Actes CCAM avec extension documentaire obligatoire mais absente</title>
  <dc:creator>denis Gustin</dc:creator>
  <link>https://www.datapmsi.com/posts/mco/script_mco_acte_ccam_extension_documentaire_absente/</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Rappel : les actes d’anesthésie appelent le codage d’une extension documentaire</p>
<p>On suppose ici que la table des actes CCAM intègre la clé d’identification des RUM (no_rss,no_rum) permettant de rapprocher les RUM et les actes CCAM</p>
<p>On repère les actes d’anesthésie via activite_ccam == 4</p>
</section>
<section id="code" class="level2">
<h2 class="anchored" data-anchor-id="code">Code</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb1-2"></span>
<span id="cb1-3">actes_ccam_no_extension_documentaire <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>mco_rum<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>ccam <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-4">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(nas,no_rss,no_rum,code_ccam,activite_ccam,extension_documentaire_ccam) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-5">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(activite_ccam <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"4"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(extension_documentaire_ccam))</span>
<span id="cb1-6">actes_ccam_no_extension_documentaire</span></code></pre></div>
</div>
</section>
<section id="commentaires" class="level2">
<h2 class="anchored" data-anchor-id="commentaires">Commentaires</h2>
<p>Ligne 3 : <code>mco_rss$ccam</code> est un tibble des actes CCAM</p>
<p>Cette requête est réalisable dans <a href="https://www.pmsisoft.com/acces_pmsisoft_mco" target="_blank">PMSISoft MCO</a> dans l’écran <code>Codage CCAM &gt; Base des actes CCAM</code> via le filtrage de variables <code>activite_ccam Egal à 4 ET extension_documentaire_ccam Est vide</code></p>
<p><a href="http://www.lespmsi.com/scripts-pmsi-r/" target="_blank">Etre tenu au courant de la publication des nouveaux scripts PMSI R</a></p>


</section>

 ]]></description>
  <category>MCO</category>
  <category>CCAM</category>
  <guid>https://www.datapmsi.com/posts/mco/script_mco_acte_ccam_extension_documentaire_absente/</guid>
  <pubDate>Sat, 08 Jun 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Nombre de JP d’un séjour MCO</title>
  <dc:creator>denis Gustin</dc:creator>
  <link>https://www.datapmsi.com/posts/mco/script_mco_nb_jp_sejour/</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Après avoir calculé, par séjour, les variables <code>date_entree_sejour</code> et <code>date_sortie_sejour</code>, on calcule <code>nb_jp_sejour</code></p>
<p>On en profite pour calculer aussi le nombre de RUM par séjour <code>nb_rum_sejour</code></p>
</section>
<section id="code" class="level2">
<h2 class="anchored" data-anchor-id="code">Code</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb1-2"></span>
<span id="cb1-3">sejour_extended <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> mco_rss<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>rum <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-4">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(nas,no_rss,no_rum,date_entree_um,date_sortie_um) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-5">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(no_rss) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-6">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">date_entree_sejour =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min</span>(date_entree_um), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">date_sortie_sejour =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(date_sortie_um),</span>
<span id="cb1-7">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nb_jp_sejour =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.integer</span>(date_sortie_sejour<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>date_entree_sejour),</span>
<span id="cb1-8">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nb_rum_sejour =</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>()</span>
<span id="cb1-9">                  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-10">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ungroup</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-11">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">distinct</span>(nas,no_rss,date_entree_sejour,date_sortie_sejour,nb_jp_sejour,nb_rum_sejour)</span>
<span id="cb1-12">sejour_extended</span></code></pre></div>
</div>
</section>
<section id="commentaires" class="level2">
<h2 class="anchored" data-anchor-id="commentaires">Commentaires</h2>
<p>Ligne 3 : <code>mco_rss$rum</code> est un tibble des variables de la partie fixe des RUM. Voir <a href="http://localhost:3479/guide_post.html#via-pmsisoft-standard">Guide des scripts - Jeux de données</a></p>
<p>Ligne 7 : on force en integer le calcul de la différence de dates qui, sinon, serait une différence en journées, peu pratique à manipuler</p>
<p>Ligne 11 : le <code>dplyr::distinct()</code> permet de ne sélectionner que des séjours via une suite de variables liées aux seuls séjours</p>
<p>Le calcul du nombre de JP ou de venues des RUM et des séjours ainsi que le calcul du nombre de RUM par séjour est disponible dans tous les écrans <a href="https://www.pmsisoft.com/acces_pmsisoft_mco" target="_blank">PMSISoft MCO</a></p>
<p><a href="http://www.lespmsi.com/scripts-pmsi-r/" target="_blank">Etre tenu au courant de la publication des nouveaux scripts PMSI R</a></p>


</section>

 ]]></description>
  <category>MCO</category>
  <guid>https://www.datapmsi.com/posts/mco/script_mco_nb_jp_sejour/</guid>
  <pubDate>Thu, 06 Jun 2024 22:00:00 GMT</pubDate>
</item>
</channel>
</rss>
